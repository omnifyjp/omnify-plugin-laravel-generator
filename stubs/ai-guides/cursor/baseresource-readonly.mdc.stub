---
description: "⛔ DO NOT EDIT - Auto-generated base API resources by Omnify. These files are overwritten on every generation."
globs: ["{{LARAVEL_BASE}}/Http/Resources/OmnifyBase/**/*.php"]
alwaysApply: true
---

# ⛔ DO NOT EDIT - Auto-Generated Base Resources

This file is **auto-generated by Omnify** and will be **overwritten** on next `npx omnify generate`.

## ❌ ABSOLUTELY FORBIDDEN

- Adding fields
- Modifying field mapping
- Changing relation includes
- Any modifications whatsoever

## ✅ CORRECT APPROACH

### To modify API output:

1. Edit the schema YAML in `schemas/` - add/modify properties
2. Run `npx omnify generate`

### To add custom fields:

Add to the **User Resource** (e.g., `{{LARAVEL_BASE}}/Http/Resources/PostResource.php`), NOT here.

```php
// ✅ CORRECT: Add custom fields in User Resource
class PostResource extends PostResourceBase
{
    public function toArray($request): array
    {
        return array_merge(parent::toArray($request), [
            'read_time' => $this->getReadTime(),
            'is_published' => $this->status === 'published',
        ]);
    }
}
```

## What BaseResource Provides

| Feature | Description | Source |
|---------|-------------|--------|
| All scalar fields | `id`, `title`, `content`, etc. | Schema properties |
| Timestamps | `created_at`, `updated_at` | Auto-included |
| Relations | `$this->whenLoaded('author')` | Schema associations |
| Localized labels | Field display names | Schema `displayName` |

## Schema to Resource Mapping

```yaml
# Schema YAML
properties:
  title:
    type: String
  author:
    type: Association
    relation: ManyToOne
    target: User
```

```php
// Generated BaseResource
return [
    'id' => $this->id,
    'title' => $this->title,
    'author' => UserResource::make($this->whenLoaded('author')),
    'created_at' => $this->created_at?->toISOString(),
];
```

## See Also

- `resource-editable.mdc` - Rules for editing User Resources
- `omnify-schema.mdc` - Schema YAML reference
